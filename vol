#!/bin/sh
# shellcheck disable=1090,2154

. ~/.cache/wal/colors.sh
blockcolor=$color9
txtcolor=$color0

case $BLOCK_BUTTON in
    # Left Click
	1) 
    kitty --class float -e ncpamixer
    ;;
    # Middle Click
	2) 
    pamixer --toggle-mute 
    ;;
    # Right Click
	3) 
    killall -9 pavucontrol 
    ;;
    # Scroll Up
	4) 
    pamixer -i 5 
    ;;
    # Scroll Down
	5) 
    pamixer -d 5 
    ;;
    # Backward Button
    8) ;;
    # Forward Button
    9) ;;
esac

vol=$(pamixer --get-volume)

if [ "$vol" -lt "30" ];then
	icon="ðŸ”ˆ"
elif [ "$vol" -lt "70" ];then
	icon="ðŸ”‰"
elif [ "$(pamixer --get-mute)" ];then
    icon="ðŸ”‡"
else
	icon="ðŸ”Š"
fi

output_device=$(pactl list sinks | grep -A1 "$(pactl info | awk '/Default Sink/{print $3}')" | grep "Description" | tr ' ' '\n' | tail -n1)

printf "\
<span foreground='$blockcolor' background='$color0'>î‚º</span>\
<span foreground='$txtcolor' background='$blockcolor'>%s</span>\
<span foreground='$color0' background='$blockcolor'>î‚º</span>\n" \
" $icon $output_device - $vol% "
