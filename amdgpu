#!/bin/sh

case $BLOCK_BUTTON in
    # Left Click
    1) notify-send "Info for $(neofetch gpu)" "$(sensors | grep -A8 vddgfx)" ;;
    # Middle Click
	2) tmux neww radeontop ;;
    # Right Click
    3) notify-send "GPU Temps" "$(sensors | grep -A8 vddgfx)" ;;
    # Scroll Up
    4) ;;
    # Scroll Down
    5) ;;
esac

usage=$(cat /sys/class/drm/card0/device/gpu_busy_percent)

if [ "$usage" -ge 90 ] ; then
    icon="  "
elif [ "$usage" -ge 60 ] ; then
    icon="  "
elif [ "$usage" -ge 40 ] ; then
    icon="  "
elif [ "$usage" -ge 10 ] ; then
    icon="  "
else
    icon="  "
fi

command=$(sensors | awk '/^junction/ {print $2}')

echo "$icon  $command"
